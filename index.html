<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Cain Play It</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Cain Play It">
<meta property="og:url" content="https://cainmaila.github.io/index.html">
<meta property="og:site_name" content="Cain Play It">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cain Play It">
  
    <link rel="alternate" href="/atom.xml" title="Cain Play It" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Cain Play It</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">我的碼農備忘錄</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://cainmaila.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- cainmaila.github.io -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-2030406205508697"
     data-ad-slot="2223033852"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  
    <article id="post-brotli" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/10/brotli/" class="article-date">
  <time datetime="2017-02-10T08:02:04.000Z" itemprop="datePublished">2017-02-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/10/brotli/">在Express上新一代的資料壓縮演算法 - Brotli</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Brotli是Google發布的一套壓縮演算法，目前主要運用在資料傳輸壓縮，由前實習生 Anamaria Cotîrlea，在短短幾個月內做的專案，它就為 Google Play 帶來極大效益，每天能減少大約 1.5PB（即 150 萬 GB）數據量，讓用戶下載及更新應用程式變得更順暢、更節省數據傳輸量。</p>
<p>Brotli最初發布於2015年，用於網路字型的離線壓縮。Google軟體工程師在2015年9月發布了包含通用無失真資料壓縮的Brotli增強版本，特別側重於HTTP壓縮。其中的編碼器被部分覆寫以提高壓縮比，編碼器和解碼器都提高了速度，串流API已被改進，增加更多壓縮品質級別。新版本還展現了跨平台的效能改進，以及減少解碼所需的記憶體。</p>
<p>與常見的通用壓縮演算法不同，Brotli使用一個預定義的120千位元組字典。該字典包含超過13000個常用單詞、短語和其他子字串，這些來自一個文字和HTML文件的大型語料庫。預定義的演算法可以提升較小檔案的壓縮密度。</p>
<p>使用brotli取代deflate來對文字檔案壓縮通常可以增加20%的壓縮密度，而壓縮與解壓縮速度則大致不變。</p>
<h2 id="實作實驗"><a href="#實作實驗" class="headerlink" title="實作實驗"></a>實作實驗</h2><p>以下實際測試比較<br><br>採用 <a href="https://www.npmjs.com/package/brotli" target="_blank" rel="external">node brotli</a></p>
<p>壓縮3130K的jpg檔</p>
<table>
<thead>
<tr>
<th>quality</th>
<th>brotli time</th>
<th>brotli size</th>
</tr>
</thead>
<tbody>
<tr>
<td>11</td>
<td>20.67s</td>
<td>1892K</td>
</tr>
<tr>
<td>10</td>
<td>8.97s</td>
<td>1896K</td>
</tr>
<tr>
<td>9</td>
<td>1.79s</td>
<td>1914K</td>
</tr>
<tr>
<td>8</td>
<td>1.03s</td>
<td>1946K</td>
</tr>
<tr>
<td>7</td>
<td>0.98s</td>
<td>1946K</td>
</tr>
<tr>
<td>6</td>
<td>0.84s</td>
<td>1947K</td>
</tr>
<tr>
<td>5</td>
<td>0.68s</td>
<td>1951K</td>
</tr>
</tbody>
</table>
<h2 id="Express的中間插件"><a href="#Express的中間插件" class="headerlink" title="Express的中間插件"></a>Express的中間插件</h2><p>Brotli目前瀏覽器支援度</p>
<img src="/2017/02/10/brotli/brotli.png" alt="brotli.png" title="">
<p>在這之前，你可能採用<strong>compression</strong>，幫你的資料傳輸做gzip壓縮，如果你想採用<strong>Brotli</strong>壓縮，你可以改用以下中間件</p>
<h4 id="shrink-ray"><a href="#shrink-ray" class="headerlink" title="shrink-ray"></a><a href="https://www.npmjs.com/package/shrink-ray" target="_blank" rel="external">shrink-ray</a></h4><blockquote>
<p>Windows上，這個包依賴於<strong>node-gyp</strong></p>
</blockquote>
<p>shrink-ray支援以下規格</p>
<ul>
<li>deflate</li>
<li>gzip</li>
<li>brotli</li>
<li>zopfli (for asynchronous compression of static assets)</li>
</ul>
<p>shrink-ray 會幫你選擇適當的數據壓縮方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</div><div class="line"><span class="keyword">var</span> shrinkRay = <span class="built_in">require</span>(<span class="string">'shrink-ray'</span>)</div><div class="line"><span class="keyword">var</span> app = express();</div><div class="line">app.use(shrinkRay(&#123;&#125;))</div><div class="line">app.use(express.static(path.join(__dirname, <span class="string">'web'</span>))); <span class="comment">//靜態頁面</span></div><div class="line">app.listen(<span class="number">80</span>);</div></pre></td></tr></table></figure>
<h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><p><a href="https://opensource.googleblog.com/2015/09/introducing-brotli-new-compression.html" target="_blank" rel="external">Google開源公告</a></p>
<p><a href="https://github.com/google/brotli" target="_blank" rel="external">原始代碼</a></p>
<p><a href="https://datatracker.ietf.org/doc/rfc7932/" target="_blank" rel="external">數據壓縮規格</a></p>
<p><a href="http://caniuse.com/#search=Brotli" target="_blank" rel="external">瀏覽器相容性</a></p>
<p><a href="https://blogs.akamai.com/2016/02/understanding-brotlis-potential.html" target="_blank" rel="external">效能比較</a></p>
<p><a href="http://blog.csdn.net/bjtufang/article/details/49613219" target="_blank" rel="external">Brotli与zip压缩率对比</a></p>
<p><a href="https://cran.r-project.org/web/packages/brotli/vignettes/brotli-2015-09-22.pdf" target="_blank" rel="external">比較Brotli與各種壓縮算法比較</a></p>
<p><a href="https://www.smashingmagazine.com/2016/10/next-generation-server-compression-with-brotli/" target="_blank" rel="external">效能比較與Express使用</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cainmaila.github.io/2017/02/10/brotli/" data-id="ciyzlxsk40001bkyfen6rtf7f" class="article-share-link">Share</a>
      
        <a href="https://cainmaila.github.io/2017/02/10/brotli/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/express/">express</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-rollup-web-app-3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/26/rollup-web-app-3/" class="article-date">
  <time datetime="2017-01-26T08:10:40.000Z" itemprop="datePublished">2017-01-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/26/rollup-web-app-3/">建立你的前端開發環境(三) - 使用 npm 的第三方模塊</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>經過上一篇 <a href="/2017/01/26/rollup-web-app-2/">建立你的前端開發環境(二) - ES6開發環境</a> 建構後，你的rollup已經可以正常編譯ES6專案了。</p>
<p>如果你的專案需要其他第三方外掛，比方 vue vue-router 等工具，一般方式你可以直接把code掛在script標籤上(全域)<br><br>不過實務上我還是喜歡利用 npm 來管理我的外掛模組，比方我使用 <strong>yarn add vue</strong> 方式來安裝 vue ，然後再使用 <strong>import Vue from ‘vue’</strong> 方式來匯入使用。<br><br>不過如果依照目前 rollup 專案，編譯時會產生錯誤，因為實際上使用npm管理的模塊，並不會被 rollup 直接使用。如果你需要使用 npm 管理的掛件，必須再安裝以下掛件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add rollup-plugin-node-resolve --dev</div></pre></td></tr></table></figure>
<p>它會允許 rollup 使用 node_modules 資料夾中的掛件，不過 npm 所管理的模塊是使用 CommonJS ，為了讓 rollup 可以正確編譯它，需要再安裝以下掛件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add rollup-plugin-commonjs --dev</div></pre></td></tr></table></figure>
<p>這個掛件可以把 CommonJS 模塊轉換成為 ES6 以便後續讓 bable 去解譯它。</p>
<p>修改你的 <strong>rollup.config.js</strong> 加上以上兩個掛件</p>
<pre><code class="javascript"><span class="keyword">import</span> uglify <span class="keyword">from</span> <span class="string">'rollup-plugin-uglify'</span>;
<span class="keyword">import</span> babel <span class="keyword">from</span> <span class="string">'rollup-plugin-babel'</span>;
<span class="keyword">import</span> nodeResolve <span class="keyword">from</span> <span class="string">'rollup-plugin-node-resolve'</span>;
<span class="keyword">import</span> commonjs <span class="keyword">from</span> <span class="string">'rollup-plugin-commonjs'</span>;
<span class="keyword">export</span> <span class="keyword">default</span> {
    entry: <span class="string">'src/app.js'</span>,
    dest: <span class="string">'dist/build.js'</span>,
    format: <span class="string">'iife'</span>,
    sourceMap: <span class="string">'inline'</span>,
    plugins: [
        nodeResolve({ jsnext: <span class="literal">true</span> }), <span class="comment">//取用node_modules中的模塊</span>
        commonjs(), <span class="comment">//將commonjs轉換為es6</span>
        babel({
            exclude: <span class="string">'node_modules/**'</span>, <span class="comment">//掠過檢查node_modules資料夾</span>
        }),
        uglify(),
    ]
};
</code></pre>
<p>另外必須注意一下 plugins 的順序，rollup 會依順序解析你的模塊</p>
<p>這樣子你就可以利用 import 來匯入安裝並使用 npm 安裝的模塊了</p>
<p>待續…</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cainmaila.github.io/2017/01/26/rollup-web-app-3/" data-id="ciyzlxsl7000jbkyfns4y1egm" class="article-share-link">Share</a>
      
        <a href="https://cainmaila.github.io/2017/01/26/rollup-web-app-3/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rollup/">rollup</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-rollup-web-app-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/26/rollup-web-app-2/" class="article-date">
  <time datetime="2017-01-26T05:41:56.000Z" itemprop="datePublished">2017-01-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/26/rollup-web-app-2/">建立你的前端開發環境(二) - ES6開發環境</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>上一篇 <a href="/2017/01/25/rollup-web-app/">建立你的前端開發環境(一)</a>，你已經可以把一個基本的js壓縮打包起來，這個單元我們準備開始建構開發ES6環境。</p>
<p>就上一篇的例子，如果你用ES6語法寫一個簡單的Class宣告。</p>
<p><strong>app.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCalss</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(myName) &#123;</div><div class="line">        <span class="keyword">this</span>.myName = myName;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    logMyName() &#123;</div><div class="line">        <span class="built_in">console</span>.info(<span class="keyword">this</span>.myName);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> myClass = <span class="keyword">new</span> MyCalss(<span class="string">'Cain'</span>);</div><div class="line">myClass.logMyName();</div></pre></td></tr></table></figure></p>
<p>我們透過 yarn dev 編譯成 build.js 結果如下<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCalss</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(myName) &#123;</div><div class="line">        <span class="keyword">this</span>.myName = myName;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    logMyName() &#123;</div><div class="line">        <span class="built_in">console</span>.info(<span class="keyword">this</span>.myName);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> myClass = <span class="keyword">new</span> MyCalss(<span class="string">'Cain'</span>);</div><div class="line">myClass.logMyName();</div><div class="line"></div><div class="line">&#125;());</div></pre></td></tr></table></figure></p>
<p>你會發覺，code 幾乎沒有被處理，僅被一個立即執行的函示打包起來，這不是我們期望的結果，接下來，我們繼續建構，目標是可以把ES6輸出成ES5的code，讓大部分的瀏覽器可以正常執行。</p>
<h2 id="建立ES6開發環境"><a href="#建立ES6開發環境" class="headerlink" title="建立ES6開發環境"></a>建立ES6開發環境</h2><p>把ES6輸出成ES5需要兩個掛件，首先安裝以下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">yarn add rollup-plugin-babel --dev</div><div class="line">yarn add babel-preset-es2015-rollup --dev</div></pre></td></tr></table></figure></p>
<p>我們利用 rollup 讓他透過 babel 把 es6 的 code 編譯成為 es5<br><br>接下來我們建立個 babel 的設定檔<br><strong>.babel</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="string">"presets"</span>: [<span class="string">"es2015-rollup"</span>],</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>把 babel 掛件增加到你的 <strong>rollup.config.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> uglify <span class="keyword">from</span> <span class="string">'rollup-plugin-uglify'</span>;</div><div class="line"><span class="keyword">import</span> babel <span class="keyword">from</span> <span class="string">'rollup-plugin-babel'</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    entry: <span class="string">'app.js'</span>,</div><div class="line">    dest: <span class="string">'build.js'</span>,</div><div class="line">    format: <span class="string">'iife'</span>,</div><div class="line">    sourceMap: <span class="string">'inline'</span>,</div><div class="line">    plugins: [</div><div class="line">        babel(), <span class="comment">//增加 babel 掛件</span></div><div class="line">        uglify(),</div><div class="line">    ]</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>之後再次編譯，yarn dev，編譯結果如下<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> classCallCheck = <span class="function"><span class="keyword">function</span> (<span class="params">instance, Constructor</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (!(instance <span class="keyword">instanceof</span> Constructor)) &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Cannot call a class as a function"</span>);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> createClass = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">defineProperties</span>(<span class="params">target, props</span>) </span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; props.length; i++) &#123;</div><div class="line">      <span class="keyword">var</span> descriptor = props[i];</div><div class="line">      descriptor.enumerable = descriptor.enumerable || <span class="literal">false</span>;</div><div class="line">      descriptor.configurable = <span class="literal">true</span>;</div><div class="line">      <span class="keyword">if</span> (<span class="string">"value"</span> <span class="keyword">in</span> descriptor) descriptor.writable = <span class="literal">true</span>;</div><div class="line">      <span class="built_in">Object</span>.defineProperty(target, descriptor.key, descriptor);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">Constructor, protoProps, staticProps</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (protoProps) defineProperties(Constructor.prototype, protoProps);</div><div class="line">    <span class="keyword">if</span> (staticProps) defineProperties(Constructor, staticProps);</div><div class="line">    <span class="keyword">return</span> Constructor;</div><div class="line">  &#125;;</div><div class="line">&#125;();</div><div class="line"></div><div class="line"><span class="keyword">var</span> MyCalss = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">MyCalss</span>(<span class="params">myName</span>) </span>&#123;</div><div class="line">        classCallCheck(<span class="keyword">this</span>, MyCalss);</div><div class="line"></div><div class="line">        <span class="keyword">this</span>.myName = myName;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    createClass(MyCalss, [&#123;</div><div class="line">        key: <span class="string">'logMyName'</span>,</div><div class="line">        value: <span class="function"><span class="keyword">function</span> <span class="title">logMyName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.info(<span class="keyword">this</span>.myName);</div><div class="line">        &#125;</div><div class="line">    &#125;]);</div><div class="line">    <span class="keyword">return</span> MyCalss;</div><div class="line">&#125;();</div><div class="line"></div><div class="line"><span class="keyword">var</span> myClass = <span class="keyword">new</span> MyCalss(<span class="string">'Cain'</span>);</div><div class="line">myClass.logMyName();</div><div class="line"></div><div class="line">&#125;());</div></pre></td></tr></table></figure></p>
<p>太棒了! 透過 babel 後，原本的 es6 編譯成為 es5，且format iife模式讓你直接js把掛在script標籤上，瀏覽器可以正常的執行它。</p>
<blockquote>
<p>如果如果你仔細看過 webpack  與 rollup 編譯的結果後，你會發覺 rollup 真的乾淨非常多，產出的js檔案也相對小，重點是佈建整個開發環境速度也相當快速，這也是我目前選用 rollup 的主因</p>
</blockquote>
<h3 id="建立你的前端開發環境-三-使用-npm-的第三方模塊"><a href="#建立你的前端開發環境-三-使用-npm-的第三方模塊" class="headerlink" title="建立你的前端開發環境(三) - 使用 npm 的第三方模塊"></a><a href="/2017/01/26/rollup-web-app-3/">建立你的前端開發環境(三) - 使用 npm 的第三方模塊</a></h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://cainmaila.github.io/2017/01/26/rollup-web-app-2/" data-id="ciyzlxsl5000ibkyfq10gp8i7" class="article-share-link">Share</a>
      
        <a href="https://cainmaila.github.io/2017/01/26/rollup-web-app-2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rollup/">rollup</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-rollup-web-app" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/25/rollup-web-app/" class="article-date">
  <time datetime="2017-01-25T07:55:15.000Z" itemprop="datePublished">2017-01-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/25/rollup-web-app/">建立你的前端開發環境(一) - Rollup</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>為了建構一個讓自己可以開心工作的js前端開發環境，嘗試了了Grunt，Gulp,一直到目前最多人的 Webpack<br><br>Webpack 真的很不錯，外掛資源也豐富，但是總覺得輸出封裝後的code有些多餘(甚至你不會想要看他)，其實有時候只是需要封裝一個小模組，可能一些小演算法，或許用了ES6語法，想輸出處理成乾乾淨淨的js。這時候可以考慮使用 <a href="http://rollupjs.org/" target="_blank" rel="external">Rollup.js</a> , 比起 Webpack 它更小更快，還能刪除多餘的程式碼(沒有用到的模組，rollup不會把它封裝到你的js)，但是最大的重點就是，我實在不想為了寫個小東西就去建構一個肥大的webpack環境。</p>
<h2 id="Rollup-js-官網"><a href="#Rollup-js-官網" class="headerlink" title="Rollup.js 官網"></a><a href="http://rollupjs.org/" target="_blank" rel="external">Rollup.js 官網</a></h2><p>本教程將一步一步帶你利用rollup建構一個自己的 Web app 前端開發環境</p>
<img src="/2017/01/25/rollup-web-app/js.jpg" alt="js.jpg" title="">
<h2 id="安裝-yarn"><a href="#安裝-yarn" class="headerlink" title="安裝 yarn"></a>安裝 yarn</h2><p>如果你以熟悉npm的話，yarn你可以當成一樣的東西，只是我覺得大部分情況下yarn更快。<br><br>如果你想繼續使用熟悉的npm，並不會影響rollup的使用，請自行評估。<br><br>關於yarn安裝與使用，<a href="https://cainmaila.github.io/2016/10/14/use-yern/">你可以參考這裡</a></p>
<h2 id="建構你的第一個rollup專案"><a href="#建構你的第一個rollup專案" class="headerlink" title="建構你的第一個rollup專案"></a>建構你的第一個rollup專案</h2><p>為了讓你可以很清楚下去，我們這裡先使用最單純的作法。</p>
<p>首先建構你的資料夾，命令列中並進入這個工作目錄</p>
<p>建構專案的 package.json (這裡跟 npn init 是一樣意思)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn init</div></pre></td></tr></table></figure></p>
<p>安裝rollup<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add rollup --dev</div></pre></td></tr></table></figure></p>
<p>這裡加上 –dev 參數，代表我只想在develop模式中安裝他。<br><br>讓他加在 package.json 的 devDependencies 標籤中。</p>
<p>專案中新增一個 <strong>rollup.config.js</strong> 檔案<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    entry: <span class="string">'app.js'</span>,</div><div class="line">    dest: <span class="string">'build.js'</span>,</div><div class="line">    format: <span class="string">'iife'</span>,</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>這是一個rollup設定檔，上述是指輸入編譯 app.js，輸出成 build.js，封裝方式採用 iife。</p>
<p>關於format有以下幾種選擇</p>
<ul>
<li><strong>amd</strong> - 輸出成AMD模塊規格(Asychronous Module Definition)，RequireJS可以用</li>
<li><strong>cjs</strong> - CommonJS規格，適合Node，Browserify，Webpack 等</li>
<li><strong>es</strong> - 這是預設值，不改變code</li>
<li><strong>iife</strong> - 自動執行函示，最適合導入 html 中的 script 標籤，而且檔案最小</li>
<li><strong>umd</strong> - 通用模式，amd cjs iife 都能用</li>
</ul>
<p>在 package.json 中加上 rollup 執行命令<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="string">"name"</span>: <span class="string">"demo"</span>,</div><div class="line">    <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">    <span class="string">"main"</span>: <span class="string">"index.js"</span>,</div><div class="line">    <span class="string">"license"</span>: <span class="string">"MIT"</span>,</div><div class="line">    <span class="string">"devDependencies"</span>: &#123;</div><div class="line">        <span class="string">"rollup"</span>: <span class="string">"^0.41.4"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="string">"scripts"</span>: &#123;</div><div class="line">        <span class="string">"dev"</span>: <span class="string">"rollup -c"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>加上 scripts 標籤，這個標籤相當好用，可以巨集你的命令，往後只要命令列中下 yarn dev 就會執行 rollup -c 命令，rollup預設會去找 rollup.config.js 這個設定檔</p>
<h2 id="封裝你的js"><a href="#封裝你的js" class="headerlink" title="封裝你的js"></a>封裝你的js</h2><p>依照 rollup.config.js 中的設定，你可以建立一支app.js，執行以下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn dev</div></pre></td></tr></table></figure></p>
<p>就會開始處理你的js，處理好了後會輸出成 build.js，你可以自己更改 format 設定看看輸出內容的差異。</p>
<p>以上是最基本的使用方法，當然為了讓自己有更愉快的開發環境，我們不會只作這樣的事，為了讓你清楚使用方式，後面們會再慢慢加上去。</p>
<h2 id="壓縮你的js"><a href="#壓縮你的js" class="headerlink" title="壓縮你的js"></a>壓縮你的js</h2><p>例如你需要壓縮你的js,你可以加上以這個掛件</p>
<p>首先安裝<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add rollup-plugin-uglify --dev</div></pre></td></tr></table></figure></p>
<p>在 rollup.config.js 中加上 uglify 掛件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> uglify <span class="keyword">from</span> <span class="string">'rollup-plugin-uglify'</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    entry: <span class="string">'app.js'</span>,</div><div class="line">    dest: <span class="string">'build.js'</span>,</div><div class="line">    format: <span class="string">'iife'</span>,</div><div class="line">    sourceMap: <span class="string">'inline'</span>, <span class="comment">//加上sourceMap</span></div><div class="line">    plugins: [</div><div class="line">        uglify(), <span class="comment">//匯入 uglify 掛件</span></div><div class="line">    ]</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>之後再編譯一次，你會發覺輸出的 build.js 已經被壓縮處理過了。<br><br>為了開發上的方便，你可以在輸出的code上加上 sourceMap ，所以我加上了 sourceMap: ‘inline’ 設定，這樣子如果有資訊輸出或錯誤，可以明確告訴你位置在哪(行數那些..)，如果不需要可以拿掉他，終究對編譯速度還是有影響。<br><br>實際發布請把這個設定拿掉，inline 這個設定會把 sourceMap 加在js結尾，增加了js容量，這不是我們希望看到的結果。</p>
<h3 id="建立你的前端開發環境-二-ES6開發環境"><a href="#建立你的前端開發環境-二-ES6開發環境" class="headerlink" title="建立你的前端開發環境(二) - ES6開發環境"></a><a href="/2017/01/26/rollup-web-app-2/">建立你的前端開發環境(二) - ES6開發環境</a></h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://cainmaila.github.io/2017/01/25/rollup-web-app/" data-id="ciyzlxsld000lbkyft2jmp2i5" class="article-share-link">Share</a>
      
        <a href="https://cainmaila.github.io/2017/01/25/rollup-web-app/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rollup/">rollup</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-express-ssl" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/08/express-ssl/" class="article-date">
  <time datetime="2016-11-08T08:48:23.000Z" itemprop="datePublished">2016-11-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/08/express-ssl/">在你的Express加上https(SSL)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>如何在你的Express服務中加上SSL，如果你不希望付費申請的話，可以直接使用<a href="https://www.sslforfree.com/" target="_blank" rel="external">SSL For Free</a><br><br>你唯一要做的事就是每三個月更新一次(你可以設定郵件通知)</p>
<img src="/2016/11/08/express-ssl/ssl.png" alt="ssl.png" title="">
<p>申請方式請參閱這篇文章<a href="https://free.com.tw/ssl-for-free/" target="_blank" rel="external">SSL For Free 免費 SSL 憑證申請，使用 Let’s Encrypt 最簡單方法教學！</a></p>
<p>申請完成後你會取得三個檔案</p>
<ul>
<li>ca_bundle.crt</li>
<li>certificate.crt</li>
<li>private.key</li>
</ul>
<p>certificate.crt需先轉成pem檔才可以使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl x509 -in certificate.crt -inform der -outform pem -out certificate.pem</div></pre></td></tr></table></figure>
<p>透過openssl將crt轉成pem檔</p>
<p>匯入express服務<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</div><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"><span class="keyword">var</span> keyPath = <span class="string">'./private.key'</span>;</div><div class="line"><span class="keyword">var</span> certPath = <span class="string">'./certificate.pem'</span>;</div><div class="line"><span class="keyword">var</span> hskey = fs.readFileSync(keyPath);</div><div class="line"><span class="keyword">var</span> hscert = fs.readFileSync(certPath);</div><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</div><div class="line"><span class="keyword">var</span> https = <span class="built_in">require</span>(<span class="string">'https'</span>);</div><div class="line"><span class="keyword">var</span> app = express();</div><div class="line">app.use(express.static(path.join(__dirname, <span class="string">'web'</span>)));</div><div class="line"><span class="keyword">var</span> server = https.createServer(&#123;</div><div class="line">	key: hskey,</div><div class="line">    cert: hscert</div><div class="line">&#125;, app);</div><div class="line">server.listen(<span class="number">443</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'runing Web Server in '</span> + port + <span class="string">' port...'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>SSL預設對外請使用 443 port，路由請記得開啟</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cainmaila.github.io/2016/11/08/express-ssl/" data-id="ciyzlxskb0003bkyftduxznla" class="article-share-link">Share</a>
      
        <a href="https://cainmaila.github.io/2016/11/08/express-ssl/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/express/">express</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-sublime-vue-template" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/18/sublime-vue-template/" class="article-date">
  <time datetime="2016-10-18T02:23:36.000Z" itemprop="datePublished">2016-10-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/18/sublime-vue-template/">Sublime Text 整理 vue Template</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>自從開始用Vue框架後，一直很快樂的在coding前端，不但學習曲線低，效能也上得了檯面</p>
<p>最棒的是可以像React自訂Component，不但架構清晰，如果規劃的好，Component還可以拿去別的專案使用。</p>
<p>vue.js 允許你自己定義 .vue 檔(Component檔)，你可以把Template，js，css(less、sass..) 全部封裝在裡面，最後透過 像是 webpack 或者 rollup 打包進你的專案使用。</p>
<p>筆者本身使用 Sublime Text 作為開發IDE，你可上去 <a href="https://packagecontrol.io/" target="_blank" rel="external">packagecontrol.io</a>上查看vue的相關資源，目前有以下三個。</p>
<img src="/2016/10/18/sublime-vue-template/a1.png" alt="a1.png" title="">
<ul>
<li><strong>Vuejs Snippets</strong> - 提供vue Snippets</li>
<li><strong>Vue Syntax Highlight</strong> - vue語法支援</li>
<li><strong>Vuejs Complete Package</strong> - vue語法自動完整</li>
</ul>
<p>有了以上這些掛件，基本上可以讓你在Sublime Text很開心的開發vue.js</p>
<p>最後你如果有使用版型整理，會發現並沒有支援.vue檔的掛件 (這件事曾將讓我這偏執狂很很不開心XD)</p>
<p>但是只細觀察後你會發現一件事，.vue的內容，其實是可以符合html規範的，所以當你想要整理.vue的Template時，只要把你平常整理html的方法拿來整理.vue就行了。</p>
<ol>
<li><p>首先安裝這個掛件 <a href="https://packagecontrol.io/packages/HTML-CSS-JS%20Prettify" target="_blank" rel="external">HTML-CSS-JS Prettify</a> ，他是用來幫你整理版面的。</p>
</li>
<li><p>打開工具列的 Preferences &gt;  Package Settings &gt; HTML/JS/CSS Prettify &gt; Set Prettify Preferences </p>
</li>
<li><p>設定檔中的的html支援檔名加上vue</p>
</li>
</ol>
<img src="/2016/10/18/sublime-vue-template/s2.png" alt="s2.png" title="">
<ol>
<li><p>開工具列的 Preferences &gt;  Package Settings &gt; HTML/JS/CSS Prettify &gt; Set Plugin Options</p>
</li>
<li><p>把 <strong>format_on_save</strong> 參數改成 <strong>true</strong> ，這樣子每當你save時幫你整理對齊的版面。</p>
</li>
</ol>
<p>碼農們! 繼續快樂的開發吧!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cainmaila.github.io/2016/10/18/sublime-vue-template/" data-id="ciyzlxslf000mbkyfa695icsk" class="article-share-link">Share</a>
      
        <a href="https://cainmaila.github.io/2016/10/18/sublime-vue-template/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sublime-text/">sublime text</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/">vue</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-use-yern" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/14/use-yern/" class="article-date">
  <time datetime="2016-10-14T02:16:05.000Z" itemprop="datePublished">2016-10-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/14/use-yern/">新一代的js套件管理工具yarn - 取代npm的工具</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>談一下突然爆紅的<a href="https://github.com/yarnpkg/yarn" target="_blank" rel="external">Yarn</a>，這是Facebook最近發布的一款依賴包安裝工具。<br><br>比較npm有什麼看得見的優勢? 首先，他<strong>非常快</strong>，快到見鬼XD<br><br>之前裝babel-preset-es2015一直是個痛，改用yarn裝居然不到10秒…<br><br>yarn緩存了每次你下載的模塊，所以同樣模塊同樣的版本不會發送第二次下載請求，在開始安裝一個包之前會先用checksums來驗證，你不用擔心本地的緩存的包被破壞了導致安裝失敗<br>yarn也可以通過並行的網絡請求最大限度利用網絡資源，你可以參考官方對比 npm 的區別 <a href="https://yarnpkg.com/en/compare" target="_blank" rel="external">Compare Yarn Performance</a></p>
<p>另外，npm自己本身也有參與這個專案，所以…斷然改用吧!</p>
<p><strong><a href="https://yarnpkg.com/" target="_blank" rel="external">yarn官方網站</a></strong></p>
<img src="/2016/10/14/use-yern/yarn.jpg" alt="yarn.jpg" title="">
<h2 id="如何安裝"><a href="#如何安裝" class="headerlink" title="如何安裝"></a>如何安裝</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i yarn -g</div></pre></td></tr></table></figure>
<h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><p>定義package.json</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn init</div></pre></td></tr></table></figure>
<p>安裝套件，比方express</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add express</div></pre></td></tr></table></figure>
<p>現在不需要家 –save 參數也會新增到package.json</p>
<p>移除套件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn remove express</div></pre></td></tr></table></figure></p>
<p>基本上大部分都跟npm用法類似，你也可以用 yarn -h 查詢用法</p>
<p>根本無痛轉移,大家衝吧!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cainmaila.github.io/2016/10/14/use-yern/" data-id="ciyzlxslw000ubkyfi27l9njt" class="article-share-link">Share</a>
      
        <a href="https://cainmaila.github.io/2016/10/14/use-yern/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/npm/">npm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/yarn/">yarn</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-install-node-rados" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/07/how-to-install-node-rados/" class="article-date">
  <time datetime="2016-10-07T09:35:04.000Z" itemprop="datePublished">2016-10-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/07/how-to-install-node-rados/">node-rados安裝與使用 - nodejs與Ceph通訊</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近開始使用nodejs與公司的<a href="http://www.ithome.com.tw/tech/98860" target="_blank" rel="external">Ceph</a>串接資料，中間需要透過一個叫做<a href="https://www.npmjs.com/package/rados" target="_blank" rel="external">node-rados</a>的掛件工具，不過一開始就在安裝時踩了不少坑，這裡做一下備忘，也提醒之後要使用的人。</p>
<ul>
<li><strong><a href="http://www.ithome.com.tw/tech/98860" target="_blank" rel="external">Ceph</a></strong> 叢集式檔案伺服器</li>
<li><strong><a href="https://tobegit3hub1.gitbooks.io/ceph_from_scratch/content/architecture/rados.html" target="_blank" rel="external">Rados</a></strong> Ceph存取框架</li>
</ul>
<p>雖說nodejs與Ceph，可以透過<a href="https://www.npmjs.com/package/rados" target="_blank" rel="external">node-rados</a>這個工具掛件，可以很簡便的通訊，但是還是得先確認兩件事。</p>
<h4 id="注意事項"><a href="#注意事項" class="headerlink" title="注意事項"></a>注意事項</h4><ol>
<li>目前<strong>librados-dev</strong>僅直接支援Linux，Windows要安裝非常麻煩(有好心人士作了Windows版本)，而且問題很多，我還是建議直接用Linux</li>
<li>編譯的nodejs，我試過很多版本都不行，目前我使用<strong>node v0.12.9</strong>，開發的話用nvm去切換版本吧。(不然把服務作在一個docker裡面也是一個辦法)</li>
</ol>
<h4 id="整個流程大致為這樣"><a href="#整個流程大致為這樣" class="headerlink" title="整個流程大致為這樣"></a>整個流程大致為這樣</h4><ol>
<li>安裝node-gyp</li>
<li>安裝編譯node-rados</li>
<li>準備Ceph定義檔</li>
</ol>
<h2 id="安裝node-gyp"><a href="#安裝node-gyp" class="headerlink" title="安裝node-gyp"></a>安裝node-gyp</h2><p>以下教程依據Ubuntu 14，首先安裝node-gyp，有很多相互依賴的套件，請依照以下順作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">apt-get install python-software-properties</div><div class="line">apt-get update</div><div class="line">apt-get install build-essential libncurses-dev autoconf automake libtool</div><div class="line">apt-get install make</div><div class="line">npm install -g node-gyp</div></pre></td></tr></table></figure>
<h2 id="安裝node-rados"><a href="#安裝node-rados" class="headerlink" title="安裝node-rados"></a>安裝node-rados</h2><p>記得node版本v0.12.9,當初在這卡了很久..<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">apt-get install librados-dev</div><div class="line">npm install rados</div></pre></td></tr></table></figure></p>
<h2 id="準備Ceph定義檔"><a href="#準備Ceph定義檔" class="headerlink" title="準備Ceph定義檔"></a>準備Ceph定義檔</h2><p>ceph.conf Ceph服務器設定檔，主機位置與key檔位址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mon host = 192.168.1.100</div><div class="line">keyring = ceph.client.admin.keyring</div></pre></td></tr></table></figure>
<h2 id="開始使用"><a href="#開始使用" class="headerlink" title="開始使用"></a>開始使用</h2><p>上述準備好了之後就可以開始直接利用nodejs與Ceph串接</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> rados = <span class="built_in">require</span>(<span class="string">'./build/Release/rados'</span>); <span class="comment">//編譯後rados函式庫位置</span></div><div class="line"></div><div class="line"><span class="comment">//開啟一個ceph服務，傳入你的ceph名稱，帳號，最後是你的設定檔位置</span></div><div class="line"><span class="keyword">var</span> cluster = <span class="keyword">new</span> rados.Rados( <span class="string">"ceph"</span>, <span class="string">"client.admin"</span>, <span class="string">"./ceph.conf"</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> err = cluster.connect();</div><div class="line"><span class="keyword">if</span> (err) &#123;</div><div class="line">	<span class="comment">// 連線失敗</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">"Error "</span> + err);</div><div class="line">	<span class="keyword">throw</span> err;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//印出目前使用的Ceph的fsid</span></div><div class="line"><span class="built_in">console</span>.log( <span class="string">"fsid : "</span> + cluster.get_fsid() );</div><div class="line"><span class="comment">//取回目前Ceph的pool列表</span></div><div class="line"><span class="built_in">console</span>.log( <span class="string">"ls pools : "</span> + cluster.pool_list() );</div><div class="line"></div><div class="line"><span class="comment">//建立一個通訊流，pool name是rbd</span></div><div class="line"><span class="keyword">var</span> ioctx = <span class="keyword">new</span> rados.Ioctx(cluster, <span class="string">"rbd"</span>);</div><div class="line"></div><div class="line"><span class="comment">//同步寫入Buffer資料，資料ID為myfile</span></div><div class="line">ioctx.write_full(<span class="string">"myfile"</span>, <span class="keyword">new</span> Buffer(<span class="string">"01234567ABCDEF"</span>));</div><div class="line"></div><div class="line"><span class="comment">//取回myfile資料長度</span></div><div class="line"><span class="keyword">var</span> len =  ioctx.stat(<span class="string">"myfile"</span>).psize;</div><div class="line"></div><div class="line"><span class="comment">//同步取回myfile資料</span></div><div class="line"><span class="keyword">var</span> buf = ioctx.read(<span class="string">"myfile"</span>, len);</div><div class="line"></div><div class="line"><span class="comment">//關閉服務</span></div><div class="line">cluster.shutdown();</div></pre></td></tr></table></figure>
<p>以上基本用法，詳細可以看<a href="https://github.com/ksperis/node-rados" target="_blank" rel="external">官方範例</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cainmaila.github.io/2016/10/07/how-to-install-node-rados/" data-id="ciyzlxskp0008bkyfsjpxbu34" class="article-share-link">Share</a>
      
        <a href="https://cainmaila.github.io/2016/10/07/how-to-install-node-rados/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rados/">rados</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-use-thrift-nodejs" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/14/use-thrift-nodejs/" class="article-date">
  <time datetime="2016-09-14T08:16:02.000Z" itemprop="datePublished">2016-09-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/14/use-thrift-nodejs/">基於Thrift的Node.js微服物通訊</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近公司開始要把各服務器的通訊方法改為Thrift，開始試著利用Thrift實作Node.js的通訊架構。<br><br><a href="https://thrift.apache.org" target="_blank" rel="external">Apache Thrift</a> 是 Facebook 實現的一種高效的、支持多種編程語言的遠程服務調用的框架，傳輸數據採用二進制格式，相對 XML 和 JSON 體積更小，對於高並發、大數據量和多語言的環境更有優勢。<br><br>講白了就是資料傳輸速度比傳統的Rest架構快非常多。可參考這篇<a href="http://nordicapis.com/microservice-showdown-rest-vs-soap-vs-apache-thrift-and-why-it-matters/" target="_blank" rel="external">Microservice Showdown – REST vs SOAP vs Apache Thrift (And Why It Matters)</a><br><br>這玩意很單純的利用tcp去傳輸資料，當然使省去很多瑣碎的多餘資料，省資源，效率更高，很適合用在整合散部各處的node.js微服物器。<br><br>但是Thrift也不是沒有缺點，省去了很多瑣碎的手續，相對資料的安全性就會降低，首先一大問題就是tcp連線可能隨時會中斷，所以要你要想要作長連線，最好還是乖乖地使用標準的socket協定，基本上還是建議使用在網路比較穩定的區網內服務通訊。<br><br>如果你有一個大型服務，需要收集(或請求)分散各處的微型服務，而這些服務都在同一個主機或是穩定的網路區域，就很適合利用Thrift作為通訊架構。</p>
<img src="/2016/09/14/use-thrift-nodejs/cc.png" alt="cc.png" title="">
<p>以下實作利用Thrift再在Node.js服務器中通訊的方法</p>
<ol>
<li><p>首先建立一個nodejs專案，然後安裝thrift掛件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i thrift</div></pre></td></tr></table></figure>
</li>
<li><p>建立一個介面定義檔</p>
</li>
</ol>
<p>Thrift其實最棒的地方就是<a href="https://thrift.apache.org/lib/" target="_blank" rel="external">支援很多語言</a>，你只要寫一個.thrift定義檔，就可以幫你輸出各種語言的介面函示庫，c、java、php、ruby、python、js等等主流語言。</p>
<p>先做一個基本的定義檔 demoApi.thrift<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * 介面定義檔</div><div class="line"> */</div><div class="line"></div><div class="line">/* 各語言命名空間 這邊不用改*/</div><div class="line">namespace cpp demoApi</div><div class="line">namespace d demoApi</div><div class="line">namespace java demoApi</div><div class="line">namespace php demoApi</div><div class="line">namespace perl demoApi</div><div class="line">namespace haxe demoApi</div><div class="line"></div><div class="line">/* 定義呼叫的方法介面與參數 */</div><div class="line">service DemoApi &#123;</div><div class="line">	void apiCall() /* 定義一個apiCall方法 */</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>這裡定義一個 DemoApi 的服務，這個服務裡面有一個apiCall方法，apiCall沒有接受參數，也沒有回傳值，所以前面加個viod。</p>
<ol>
<li>編譯介面檔</li>
</ol>
<p>demoApi.thrift 只是一個，定義文件，必須透過編譯器再編譯成各種語言的介面函示庫。</p>
<p><a href="https://thrift.apache.org/download" target="_blank" rel="external">首先下載編譯器</a></p>
<p>下載後編譯你的demoApi.thrift定義檔，語法如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">thrift --gen &lt;language&gt; &lt;Thrift filename&gt;</div></pre></td></tr></table></figure></p>
<p>以下針對node.js作編譯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hrift -r --gen js:node demoApi.thrift</div></pre></td></tr></table></figure></p>
<p>編譯完成後產生介面函示庫gen-nodejs資料夾，這個就是node.js的介面函示庫。目前裡面應該會有兩隻檔案<br><strong>DemoApi.js</strong> 方法介面的定義<br><strong>demoApi_types.js</strong> 結構的定義(目前我們沒有定義任何結構)</p>
<p>4.開始撰寫nodejs各通訊端點</p>
<p>介面函示庫好了後就可以開始使用了，首先寫Server端<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> thrift = <span class="built_in">require</span>(<span class="string">"thrift"</span>);</div><div class="line"><span class="comment">/*</span></div><div class="line"> * 匯入 thrift產生的函式庫</div><div class="line"> */</div><div class="line"><span class="keyword">var</span> DemoApi = <span class="built_in">require</span>(<span class="string">"./gen-nodejs/DemoApi"</span>);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 定義一個 DemoApi 服務器</div><div class="line"> */</div><div class="line"><span class="keyword">var</span> server = thrift.createServer(DemoApi, &#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 最單純的通訊，呼叫定義的apiCall方法，定義的方法請參照demo.thrift</div><div class="line">     */</div><div class="line">    apiCall: <span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"apiCall()"</span>);</div><div class="line">        result(<span class="literal">null</span>);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 偵聽8080 port</div><div class="line"> */</div><div class="line">server.listen(<span class="number">8080</span>);</div></pre></td></tr></table></figure></p>
<p>再來是Client端<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> thrift = <span class="built_in">require</span>(<span class="string">"thrift"</span>);</div><div class="line"><span class="comment">/*</span></div><div class="line"> * 匯入 thrift產生的函式庫</div><div class="line"> */</div><div class="line"><span class="keyword">var</span> DemoApi = <span class="built_in">require</span>(<span class="string">"./gen-nodejs/DemoApi"</span>);</div><div class="line"><span class="comment">/**</span></div><div class="line"> * 通訊協定定義</div><div class="line"> */</div><div class="line"><span class="keyword">var</span> transport = thrift.TBufferedTransport();</div><div class="line"><span class="keyword">var</span> protocol = thrift.TBinaryProtocol();</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 連線</div><div class="line"> */</div><div class="line"><span class="keyword">var</span> connection = thrift.createConnection(<span class="string">"localhost"</span>, <span class="number">8080</span>, &#123;</div><div class="line">    transport: transport,</div><div class="line">    protocol: protocol</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 連線錯誤事件</div><div class="line"> */</div><div class="line">connection.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.error(err);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 打開一個DemoApi服務通訊流程</div><div class="line"> */</div><div class="line"><span class="keyword">var</span> client = thrift.createClient(DemoApi, connection);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 最單純的通訊，呼叫定義的apiCall方法，定義的方法請參照demo.thrift</div><div class="line"> */</div><div class="line">client.apiCall(<span class="function"><span class="keyword">function</span> (<span class="params">err, response</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'apiCall()'</span>);</div><div class="line">    connection.end(); <span class="comment">//事情都作完記得關閉連線，很重要!!!</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>好了之後你可以分別執行server與client，順利的話應該可以看到執行的console.log結果</p>
<p>接下來我們試著傳送一些資料，目前Thrift可以定義的類型如下</p>
<ul>
<li>bool</li>
<li>i8 (byte)</li>
<li>i16(16位元整數)</li>
<li>i32(32位元整數)</li>
<li>i64(64位元整數)</li>
<li>double(64位元浮點數)</li>
<li>string(字串)</li>
<li>binary(byte array)</li>
</ul>
<p>我們在定義檔demoApi.thrift上加上一個新的方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">service DemoApi &#123;</div><div class="line">    void apiCall(), /* 逗號隔開 */</div><div class="line">    i32 add(1:i32 num1, 2:i32 num2)  /* 新增add這個方法 */</div></pre></td></tr></table></figure></p>
<p><strong>add</strong>這個方法傳入兩個32位元整數，最前面的i32代表回傳的型態</p>
<p>加上後記得再編譯一次<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hrift -r --gen js:node demoApi.thrift</div></pre></td></tr></table></figure></p>
<p>Servre端<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">apiCall: <span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"apiCall()"</span>);</div><div class="line">        result(<span class="literal">null</span>);</div><div class="line">    &#125;,</div><div class="line">add: <span class="function"><span class="keyword">function</span> (<span class="params">n1, n2, result</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"add("</span>, n1, <span class="string">","</span>, n2, <span class="string">")"</span>);</div><div class="line">        result(<span class="literal">null</span>, n1 + n2);</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>Client端<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">client.add(<span class="number">1</span>, <span class="number">1</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, response</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"1+1="</span> + response);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>這個方法是把傳入的兩個數字相加後再return回去。</p>
<p>再次執行後應該可以看到對應的結果!</p>
<h4 id="其他資料型態與完整範例請至我的gitlab"><a href="#其他資料型態與完整範例請至我的gitlab" class="headerlink" title="其他資料型態與完整範例請至我的gitlab"></a>其他資料型態與完整範例請至我的gitlab</h4><p><a href="https://gitlab.com/cainplay/Thrift_demo/tree/master" target="_blank" rel="external">https://gitlab.com/cainplay/Thrift_demo</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cainmaila.github.io/2016/09/14/use-thrift-nodejs/" data-id="ciyzlxslp000qbkyfgzf8v1tn" class="article-share-link">Share</a>
      
        <a href="https://cainmaila.github.io/2016/09/14/use-thrift-nodejs/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/thrift/">thrift</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-use-webpack-dashboard" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/07/use-webpack-dashboard/" class="article-date">
  <time datetime="2016-09-07T03:52:30.000Z" itemprop="datePublished">2016-09-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/07/use-webpack-dashboard/">讓你更優雅的使用Webpack - webpack-dashboard</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>看膩了webpack的建構輸出嗎?可以考慮試試加上<a href="https://github.com/FormidableLabs/webpack-dashboard" target="_blank" rel="external"><strong>webpack-dashboard</strong></a>讓你的wedpack輸出更優雅!<br><br>如果你有在用webpack-dev-servery作為測試服務的話，你應該會更喜歡它!</p>
<p><strong>原來的webpack輸出</strong><br><img src="/2016/09/07/use-webpack-dashboard/qa1.png" alt="qa1.png" title=""></p>
<p><strong>加上webpack-dashboard後的輸出</strong><br><img src="/2016/09/07/use-webpack-dashboard/qa2.png" alt="qa2.png" title=""></p>
<p>是不是感覺清楚清新很多!</p>
<h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><p>首先安裝<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install webpack-dashboard --save-dev</div></pre></td></tr></table></figure></p>
<p>然後在你的<strong>webpack.config.js</strong>中加上<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Dashboard = <span class="built_in">require</span>(<span class="string">'webpack-dashboard'</span>);</div><div class="line"><span class="keyword">var</span> DashboardPlugin = <span class="built_in">require</span>(<span class="string">'webpack-dashboard/plugin'</span>);</div><div class="line"><span class="keyword">var</span> dashboard = <span class="keyword">new</span> Dashboard();</div></pre></td></tr></table></figure></p>
<p>最後添加這個<strong>plugins</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">plugins: [</div><div class="line">  <span class="keyword">new</span> DashboardPlugin(dashboard.setData)</div><div class="line">]</div></pre></td></tr></table></figure></p>
<p>試著啟動你的webpack-dev-server，再加上<strong>quiet</strong>參數(主要是去除多餘的輸出)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">webpack-dev-server --quiet</div></pre></td></tr></table></figure></p>
<p><a href="https://github.com/FormidableLabs/webpack-dashboard" target="_blank" rel="external"><strong>webpack-dashboard</strong></a>目前還處於初期階段，有興趣的人可以試著玩看看。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cainmaila.github.io/2016/09/07/use-webpack-dashboard/" data-id="ciyzlxslu000tbkyfc3nbro7i" class="article-share-link">Share</a>
      
        <a href="https://cainmaila.github.io/2016/09/07/use-webpack-dashboard/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap" id="cain">
	<h3 class="widget-title">作者資訊</h3>
		<div class="head">
			<img src="/css/images/cain.jpg" alt="">
		</div>
	<div class="widget">
		朱信曄<br>
		律典(上海)信息技术有限公司<br>
		Senior Web Programer<br>
	</div>
</div>
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/cordova/">cordova</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gulp/">gulp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jsdoc/">jsdoc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rados/">rados</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rollup/">rollup</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime-text/">sublime text</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thrift/">thrift</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/">vue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yarn/">yarn</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/cordova/" style="font-size: 10px;">cordova</a> <a href="/tags/express/" style="font-size: 13.33px;">express</a> <a href="/tags/gulp/" style="font-size: 10px;">gulp</a> <a href="/tags/hexo/" style="font-size: 16.67px;">hexo</a> <a href="/tags/jsdoc/" style="font-size: 10px;">jsdoc</a> <a href="/tags/nodejs/" style="font-size: 20px;">nodejs</a> <a href="/tags/npm/" style="font-size: 13.33px;">npm</a> <a href="/tags/rados/" style="font-size: 10px;">rados</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/rollup/" style="font-size: 16.67px;">rollup</a> <a href="/tags/sublime-text/" style="font-size: 10px;">sublime text</a> <a href="/tags/thrift/" style="font-size: 10px;">thrift</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a> <a href="/tags/yarn/" style="font-size: 10px;">yarn</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">6</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/02/10/brotli/">在Express上新一代的資料壓縮演算法 - Brotli</a>
          </li>
        
          <li>
            <a href="/2017/01/26/rollup-web-app-3/">建立你的前端開發環境(三) - 使用 npm 的第三方模塊</a>
          </li>
        
          <li>
            <a href="/2017/01/26/rollup-web-app-2/">建立你的前端開發環境(二) - ES6開發環境</a>
          </li>
        
          <li>
            <a href="/2017/01/25/rollup-web-app/">建立你的前端開發環境(一) - Rollup</a>
          </li>
        
          <li>
            <a href="/2016/11/08/express-ssl/">在你的Express加上https(SSL)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
          <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- cainplay_rig -->
<ins class="adsbygoogle"
     style="display:inline-block;width:336px;height:280px"
     data-ad-client="ca-pub-2030406205508697"
     data-ad-slot="4048382650"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 朱信曄<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'cainmaila';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>